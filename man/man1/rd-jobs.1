.TH rd-jobs 1 "November 20, 2010" "" "Version ${VERSION}"
.SH NAME
.PP
rd-jobs - List, load or delete jobs from the Rundeck server
.SH SYNOPSIS
.PP
rd-jobs [\f[I]action\f[]] [\f[I]action options\f[]]\&...
.SH DESCRIPTION
.PP
The rd-jobs command lists Jobs stored on the server and optionally
downloads them as XML or Yaml, or uploads Job XML/Yaml to the
server from a file.
.PP
The tool works in one of two \f[I]ACTION\f[] modes:
.IP \[bu] 2
list : list the stored Jobs on the server (default action)
.IP \[bu] 2
load : upload job definitions up to the server
.IP \[bu] 2
purge : delete job definitions on the server
.SH OPTIONS
.PP
-h, --help : Print usage message.
.PP
-v : Run verbosely.
.SS LIST ACTION OPTIONS
.PP
-g, --group \f[I]GROUP\f[] : Group name.
List jobs within this group or sub-group
.PP
-i, --idlist \f[I]ID\f[] : Job ID List.
List Jobs with these IDs explicitly.
Comma-separated, e.g.: 1,2,3.
.PP
-n, --name \f[I]NAME\f[] : Job Name.
List jobs matching this name.
.PP
-p, --project \f[I]PROJECT\f[] : Project name.
List jobs within this project.
.PP
-f, --file \f[I]FILE\f[] : File path.
For list action, path to store the job definitions found in
XML/Yaml.
.PP
-F, --format \f[I]FORMAT\f[] : File Format.
For list action, format for the output document.
Values: \[lq]xml\[rq] or \[lq]yaml\[rq].
Default: \[lq]xml\[rq].
.SS LOAD ACTION OPTIONS
.PP
-d, --duplicate \f[I]update|skip|create\f[] : Duplicate job
behavior option.
When loading jobs, treat definitions that already exist on the
server in the given manner: `update' existing jobs,`skip' the
uploaded definitions, or `create' them anyway.
(load action.
default: update)
.PP
-f, --file \f[I]FILE\f[] : File path.
For load action, path to a FILE to upload.
.PP
-F, --format \f[I]FORMAT\f[] : File Format.
For load action, format for the input document.
Values: \[lq]xml\[rq] or \[lq]yaml\[rq].
Default: \[lq]xml\[rq].
.SS PURGE ACTION OPTIONS
.PP
The purge action uses the same set of options as the \f[I]list\f[]
action.
.SH LIST ACTION
.PP
The List action queries the server for a list of matching jobs, and
displays the result list.
Optionally the definitions of the matching jobs can be stored in a
file if \f[B]-f\f[] is specified.
.PP
The jobs can be specified explicitly by ID using the
\f[B]-i/--idlist\f[] option.
Otherwise they are searched using the options as filter criteria,
and all matching Jobs are returned.
.PP
If no options to the list action are supplied, then all Jobs on the
server are returned.
.PP
If no \f[B]-p/--project\f[] option is specified, and only one
project exists, the single project is used.
Otherwise the option is required.
.PP
\f[I]Examples\f[]
.PP
List all jobs on the server for the only project:
.PP
\f[CR]
      rd-jobs
\f[]
.PP
List all jobs in the project \[lq]demo\[rq]
.PP
\f[CR]
      rd-jobs\ -p\ demo
\f[]
.PP
List only a single job by ID:
.PP
\f[CR]
      rd-jobs\ -i\ 123\ -p\ demo
\f[]
.PP
List a set of jobs by ID and store them in a XML file:
.PP
\f[CR]
      rd-jobs\ -i\ 1,23,4\ --file\ out.xml\ -p\ demo
\f[]
.PP
List a set of jobs by ID and store them in a Yaml file:
.PP
\f[CR]
      rd-jobs\ -i\ 1,23,4\ --file\ out.yaml\ --format\ yaml\ -p\ demo
\f[]
.PP
Output from the command will list the job name, ID number in
brackets, and the URL to view the Job in the server.
.PP
\f[CR]
      Found\ 5\ jobs:
      \ \ \ 1:\ Build\ all\ [38]\ <http://localhost:8080/rundeck/scheduledExecution/show/38>
      \ \ \ 2:\ Build\ and\ Update\ Server0\ [31]\ <http://localhost:8080/rundeck/scheduledExecution/show/31>
      \ \ \ 3:\ Build\ and\ Update\ Server1\ [17]\ <http://localhost:8080/rundeck/scheduledExecution/show/17>
      \ \ \ 4:\ Build\ and\ Update\ Server2\ [45]\ <http://localhost:8080/rundeck/scheduledExecution/show/45>
      \ \ \ 5:\ Deploy\ Server4\ [46]\ <http://localhost:8080/rundeck/scheduledExecution/show/46>
\f[]
.SH LOAD ACTION
.PP
The Load action uploads the specified file to the server, and the
list of loaded jobs are displayed.
If any Jobs cannot be stored (e.g.
the user is unauthorized to run a certain command), the list of
unsuccessfully created jobs are also displayed.
.PP
The \f[B]-d,--duplicate\f[] option lets you specify what should
happen if any of the Job definitions have the same Name and Group
of an existing Job on the server.
The default option is \[lq]update\[rq], which means to overwrite
the existing definitions with the new version.
\[lq]skip\[rq] means to ignore the uploaded definition.
\[lq]create\[rq] means to create a new Job with the uploaded
definition (hence making the Group+Name non-unique).
.PP
\f[I]Examples\f[]
.PP
Load a file to the server in XML or Yaml format:
.PP
\f[CR]
      rd-jobs\ load\ -f\ jobs.xml
      rd-jobs\ load\ -f\ jobs.yaml\ -F\ yaml
\f[]
.PP
Output:
.PP
\f[CR]
      Total\ Jobs\ Uploaded:\ 2\ jobs
      Succeeded\ creating/updating\ 2\ \ Jobs:
      \ \ \ 1:\ Build\ and\ Update\ Server2\ [45]\ <http://localhost:8080/rundeck/scheduledExecution/show/45>
      \ \ \ 2:\ Deploy\ Server4\ [46]\ <http://localhost:8080/rundeck/scheduledExecution/show/46>
\f[]
.PP
If a Job was not successfully created, you will see it mentioned
along with a message about why it failed.
The number next to the Job name indicates the index of the
definition in the uploaded XML:
.PP
\f[CR]
      rd-jobs\ load\ -f\ jobs.xml
\f[]
.PP
Output:
.PP
\f[CR]
      Total\ Jobs\ Uploaded:\ 3\ jobs
      Failed\ to\ add\ 1\ Jobs:
      \ \ \ 3:\ Build\ Server1\ :\ Project\ was\ not\ found:\ north
      Project\ was\ not\ found:\ north
      Succeeded\ creating/updating\ 2\ \ Jobs:
      \ \ \ 1:\ Build\ and\ Update\ Server2\ [45]\ <http://localhost:8080/rundeck/scheduledExecution/show/45>
      \ \ \ 2:\ Deploy\ Server4\ [46]\ <http://localhost:8080/rundeck/scheduledExecution/show/46>
\f[]
.PP
If the -d skip is specified, then any jobs definitions that were
skipped will be listed:
.PP
\f[CR]
      rd-jobs\ load\ -f\ jobs.xml\ -d\ skip
\f[]
.PP
Output:
.PP
\f[CR]
      Total\ Jobs\ Uploaded:\ 2\ jobs
      Skipped\ 2\ Jobs:
      \ \ \ 1:\ Build\ and\ Update\ Server2\ [45]\ <http://localhost:8080/rundeck/scheduledExecution/show/45>
      \ \ \ 2:\ Deploy\ Server4\ [46]\ <http://localhost:8080/rundeck/scheduledExecution/show/46>
\f[]
.SH PURGE ACTION
.PP
The Purge action queries the server for a list of matching jobs,
and then requests that the server delete those jobs.
Optionally the definitions of the matching jobs can be stored in a
file if \f[B]-f\f[] is specified.
.PP
The jobs can be specified explicitly by ID using the
\f[B]-i/--idlist\f[] option.
Otherwise they are searched using the options as filter criteria,
and all matching Jobs are deleted.
.PP
If no \f[B]-p/--project\f[] option is specified, and only one
project exists, the single project is used.
Otherwise the option is required.
.SH SEE ALSO
.PP
\f[B]run\f[] (1) (run.html).
.PP
The Rundeck source code and all documentation may be downloaded
from <https://github.com/dtolabs/rundeck/>.
.SH AUTHORS
Greg Schueler; Alex Honor.

